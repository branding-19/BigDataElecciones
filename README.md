![](https://itq.edu.ec/wp-content/uploads/2023/02/Recurso-6.png)

Cargo | Docente | |
------------- | -------------
Nombre | ING. Sebastián Landázuri |
Asignatura | Base de Datos no Relacionales |
Carrera | Desarrollo de Software | Nivel: Tercer Nivel
Estudiantes | Anthony Lanchi, Brandon Naula, Mayuri Rivadeneira | 
# BigDataEleccionesPresidenciales

![](data:image/png;base64,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)

![](https://img.shields.io/github/stars/pandao/editor.md.svg) ![](https://img.shields.io/github/forks/pandao/editor.md.svg) ![](https://img.shields.io/github/tag/pandao/editor.md.svg) ![](https://img.shields.io/github/release/pandao/editor.md.svg) ![](https://img.shields.io/github/issues/pandao/editor.md.svg) ![](https://img.shields.io/bower/v/editor.md.svg)


**Tabla de Contenido**

[TOCM]

[TOC]

#Introduccion
El presente informe retrara sobre como gestionar el proyecto desarrollado sobre base de datos no relacional. En el cual como podemos visualizar trata sobre la adminstracion de datos relacionados con elecciones precidenciales 
Ya que por lo general este tema comprende ciertos aspectos muy importantes sobre el ambiente politico que vivimos hoy en dia. Ademas como cabe recalcar el proyecto nos brindara una idea mas clara como estudiantes induciendonos en el mundo de las base de datos no relacionales. Y fomentara nuestros conocimientos de desarrollador sobre este tema que estamos viendo. Esperamos que el usuario al interactuar con la base de datos, no tenga ningun inconveniente al momento de vizuzalisar cada dato, coleccion o atributo que este revisando y ademas tenga una idea clara de cada dato.
#Objetivos
El desarrollo de una base de datos Big Data para elecciones tiene como objetivo general gestionar y analizar grandes volúmenes de datos relacionados con procesos electorales.
##Objetivos especificos
* **Almacenamiento de grandes volúmenes de datos:** Las elecciones generan una gran cantidad de datos, como resultados de votación, información demográfica de votantes, detalles del proceso electoral, etc. Una base de datos Big Data está diseñada para manejar grandes volúmenes de datos de manera eficiente.

* **Análisis en Tiempo Real**: Con una base de datos Big Data, es posible realizar análisis en tiempo real durante las elecciones. Esto puede incluir el seguimiento de resultados a medida que se reciben, la identificación de patrones de votación, y la generación de informes instantáneos.

* **Detección de Fraudes**: La capacidad de procesar grandes cantidades de datos en tiempo real también puede ayudar en la detección de posibles fraudes electorales. Patrones anómalos o inconsistencias en los datos pueden ser identificados y analizados para garantizar la integridad del proceso electoral.

* **Segmentación de Votantes**: Utilizando técnicas de análisis de datos, se pueden identificar segmentos de votantes para comprender mejor las preferencias electorales. Esto puede ser útil para estrategias de campaña, estudios demográficos y toma de decisiones políticas.

* **Predicciones y Modelos Predictivos**: A través de técnicas de análisis predictivo, una base de datos Big Data puede ayudar a realizar predicciones sobre los resultados electorales. Esto puede ser útil tanto para los partidos políticos como para los analistas y medios de comunicación.

* **Mejora de la Participación Ciudadana**: Analizando datos demográficos y patrones de votación, se pueden desarrollar estrategias para aumentar la participación ciudadana. Esto podría incluir campañas específicas dirigidas a grupos demográficos particulares.

* **Transparencia y Rendición de Cuentas**: Al tener un registro detallado y accesible de los datos electorales, se puede mejorar la transparencia del proceso electoral y proporcionar una base para la rendición de cuentas.

* **Optimización de Recursos**: La gestión eficiente de datos puede llevar a la optimización de recursos, ya que se pueden identificar áreas donde se requieren mejoras o ajustes en función de los datos recopilados.
#Alcances
El alcance del proyecto abarcar en la forma eficiente de como gestionar la base de datos dedicada a la Big data de elecciones presidenciales, en la cual podemos recalcar que el presente documento va dirigido hacia los usuarios que esten interactuando con esta, y a la vez comprendan de manera eficiente y agradable. A continuacion explicaremos un poco sobre las aplicaciones, gestores, vistas, etc. Implementadas sobre este proyecto de base de datos.
En la migración del proyecto a una aplicación basada en MongoDB, se buscó garantizar la seguridad,como autenticación y autorización, para proteger la integridad de los datos. esta aplicación esta  diseñada para aprovechar las características específicas de MongoDB, como la escalabilidad, permitiendo un manejo eficiente de grandes conjuntos de datos de  las elecciones presidenciales.
La consulta en 3T, se aprovechó la interfaz intuitiva y amigable de 3T para interactuar con la base de datos MongoDB. La herramienta facilitó la visualización y exploración de los datos en tiempo real, permitiendo una comprensión más rápida de la estructura de las colecciones . Además, la capacidad de ejecutar y depurar consultas directamente en 3T contribuyó significativamente a la eficiencia en el desarrollo y ajuste de la consulta de agregación.
##Aplicaciones implementadas
Entre las aplicaciones implementadas para el funcionamiento de la base de datos tenemos las siguientes:
* **MongoDB:** es una base de datos NoSQL (orientada a documentos) que se basa en el formato BSON (Binary JSON). A diferencia de las bases de datos relacionales, MongoDB no utiliza tablas y filas, sino que almacena los datos en documentos BSON dentro de colecciones. Cada documento BSON es una estructura de datos JSON codificada en binario, y las colecciones son grupos de documentos.
* **MongoDB Atlas:** MongoDB Atlas es el servicio de base de datos en la nube ofrecido por MongoDB, Inc. Proporciona una forma fácil de implementar y administrar clústeres de MongoDB en la nube, sin la necesidad de configurar y mantener la infraestructura de la base de datos. MongoDB Atlas ofrece escalabilidad, seguridad y herramientas integradas para monitorear y respaldar la base de datos en la nube.
* **MongoDB Compass:** MongoDB Compass es una interfaz gráfica de usuario (GUI) para MongoDB que permite a los desarrolladores y administradores visualizar y manipular los datos almacenados en sus bases de datos MongoDB. Compass proporciona una forma intuitiva de explorar y consultar los datos, así como de realizar tareas de administración, como la creación de índices y la optimización de consultas.
* **Studio 3T:** Studio 3T es otra interfaz gráfica de usuario para MongoDB, similar a MongoDB Compass, pero con algunas características adicionales. Permite a los usuarios explorar y manipular sus bases de datos MongoDB de manera visual. Studio 3T también proporciona funcionalidades avanzadas, como la capacidad de escribir consultas en formato SQL y convertirlas automáticamente a consultas de MongoDB, así como herramientas de importación y exportación de datos.
#Descripcion del Proyecto
#Descripcion de la Base de datos No relacional
##Colecciones

###Candidatos:
Colección donde se describe información relevante al candidato y además 
haciendo referencia a la colección personas para saber quien es: 
![](https://github.com/branding-19/BigDataElecciones/blob/main/Candidatos.jpg?raw=true)

###DistritosElectorales
Solo contendrá el nombre del distrito ya que con la ayuda de 
referencias tendrá mas datos gracias a otras colecciones que hacen referencia a esta.
![](https://github.com/branding-19/BigDataElecciones/blob/main/DistrtitosElectorales.jpg?raw=true)

###Donaciones
Ls donaciones que tienen el propósito de financiar las actividades y 
operaciones del partido. Se contendrá datos primordiales y referencia al partido.
![](https://github.com/branding-19/BigDataElecciones/blob/main/Donaciones.jpg?raw=true)

###Financiamientos
Para esta colección en si ase referencia  contribuciones financieras
recibidas por los candidatos y partidos políticos durante la campaña.
![](https://github.com/branding-19/BigDataElecciones/blob/main/Financiamientos.jpg?raw=true)

###MesasElectorales
Para esta colección nos queremos referir sobres las mesa electorales que posee cada recinto de cada distrito y de cada provincia, por eso serian solo esos pocos datos ya que con la referencia miembros no hay la necesidad de ir escribiendo el nombre del encargado y sus datos. O también sus votantes asignados.
![](https://github.com/branding-19/BigDataElecciones/blob/main/MesasElectorales.jpg?raw=true)

###MiembrosMesas
Esta colección trata sobre las personas designadas en participar en mesas electorales en las cuales tendrán una referencia también a la colección personas para evitar escribir nuevamente sus datos personales, ademas también todos los datos que debe tener un miembro de mesa.
![](https://github.com/branding-19/BigDataElecciones/blob/main/Miembros%20Mesas.jpg?raw=true)

###PartidosPoliticos
Colección destinada al registro de partidos políticos participantes en las elecciones, su nombre, candidatos, periodos que participaron, etc.
![](https://github.com/branding-19/BigDataElecciones/blob/main/PartidoPolitico.jpg?raw=true)

###Personas
Colección padre referenciando a cada persona participante de esta base de datos, aquí en esta colección no tendrá ningún rango de cargo y demás,todas las personas involucradas en el proceso estarán aquí con sus datos primordiales.
![](https://github.com/branding-19/BigDataElecciones/blob/main/Personas.jpg?raw=true)

###Propuestas
Para esta colección quise ponerla de esta manera para así diferenciar cada propuesta presidencial para su régimen de gobierno, para eso describo lo que trata y su área que va estar destinada.
![](https://github.com/branding-19/BigDataElecciones/blob/main/Propuestas.jpg?raw=true)

###Provincias
Colección que servirá como medio para ir diferenciando cada uno de los votos que tuvo cada provincia del país, para eso después tenemos la colección distritos que luego hace referencia con esta.
![](https://github.com/branding-19/BigDataElecciones/blob/main/Provincia.jpg?raw=true)

###Recintos
Colección dedicada para el registro de sedes electorales donde van a estar 
mesas electorales donde van a estar ubicados los votantes que van a realizar ese proceso.
![](https://github.com/branding-19/BigDataElecciones/blob/main/Recintos.jpg?raw=true)

###Resultados Votos
Colección donde puedo ver los votos totales, nulos y el partido que 
gano dentro de todo un recinto.
![](https://github.com/branding-19/BigDataElecciones/blob/main/ResultadosVotos.jpg?raw=true)

###Votantes
Colección que servirá para reconocer los derechos que tiene la persona que daría el voto, además también para ver si tendrá la necesidad de votar o no.
![](https://github.com/branding-19/BigDataElecciones/blob/main/Votantes.jpg?raw=true)

=============

###DESARROLLO
Elecciones Precidenciales realizadas en mongodb ofrece una estructura flexible ya que gestina los datos de manera eficiente.

###CONSULTAS DEL PROYECTO
1. Obtener la cantidad total de votos emitidos en cada recinto electoral durante las elecciones presidenciales.
**db.MesasElectorales.aggregate([
{
$project: {
id: 1,
cantidad_votantes: { $size: "$votantes_id" }
}
}
])**

2. Encuentra el partido político que obtuvo el mayor número de votos en un distrito específico.
**db.ResultadosVotos.aggregate([
{
$match: {
periodo: "2021", 
distrito: "Sede Norte" 
}
},
{
$project: {
_id: 0, 
partido_ganador: 1, 
distrito: 1, 
total_votos: 1 
}
}
]);**

3. Calcula el promedio de donaciones recibidas por cada partido político durante la campaña.
**db.Donaciones.aggregate([
{
$group: {
_id: "$partido_politico",
total_donaciones: { $sum: 1 },
total_monto: { $sum: "$monto" }
}
},
{
$project: {
_id: 0,
partido_politico: "$_id",
promedio_donaciones: { $divide: ["$total_monto", "$total_donaciones"] }
}
}
]);**

4. Identifica los votantes que participaron en más de una elección presidencial y muestra su información demográfica.
**db.Votantes.aggregate([
  {
    $lookup: {
      from: "Personas",
      localField: "persona_id",
      foreignField: "_id",
      as: "personaInfo"
    }
  },
  {
    $group: {
      _id: "$persona_id",
      eleccionesParticipadas: { $addToSet: "$_id" },
      infoDemografica: { $first: "$personaInfo" }
    }
  },
  {
    $match: { $expr: { $gt: [{ $size: "$eleccionesParticipadas" }, 1] } }
  },
  {
    $project: {
      _id: 0,
      persona: "$infoDemografica.nombre_completo",
      correo: "$infoDemografica.correo",
      eleccionesParticipadas: "$eleccionesParticipadas"
    }
  }
])**

5. Determina el recinto electoral con la mayor participación de votantes en un determinado distrito.
**db.Recintos.aggregate([
 {
    $lookup: {
      from: "MesasElectorales",
      localField: "_id",
      foreignField: "mesas_electorales",
      as: "mesasInfo"
    }
  },
  {
    $unwind: "$mesasInfo"
  },
  {
    $lookup: {
      from: "Votantes",
      localField: "mesasInfo.votantes_id",
      foreignField: "_id",
      as: "votantesInfo"
    }
  },
  {
    $group: {
      _id: "$_id",
      nombre_recinto: { $first: "$nombre_recinto" },
      totalVotantes: { $sum: { $size: "$votantesInfo" } }
    }
  },
  {
    $sort: { totalVotantes: -1 }
  },
  {
    $limit: 1
  }
])**

6. Encuentra el candidato con más votos para una provincia en específico.
**db.ResultadoVotos.aggregate([
  {
    $lookup: {
      from: "PartidosPoliticos",
      localField: "partido_ganador",
      foreignField: "_id",
      as: "partidoInfo"
    }
  },
  {
    $lookup: {
      from: "Candidatos",
      localField: "partido_ganador.candidatos",
      foreignField: "_id",
      as: "candidatoInfo"
    }
  },
  {
    $match: { "distrito": ObjectId("65b3e1527f859af983766b5a") }
  },
  {
    $sort: { votos_ganador: -1 }
  },
  {
    $limit: 1
  },
  {
    $project: {
      _id: 0,
      provincia: "$distrito",
      partidoGanador: "$partidoInfo.nombre",
      candidato: "$candidatoInfo.nombre_completo",
      votosGanador: "$votos_ganador"
    }
  }
])**

7. Obtén la cantidad total de votos válidos y nulos en cada elección presidencial.
**db.ResultadosVotos.aggregate([
  {
    $group: {
      _id: "$_id",
      totalVotosValidos: { $sum: "$votos_ganador" },
      totalVotosNulos: { $sum: "$votos_nulos" }
    }
  },
  {
    $project: {
      _id: 0,
      eleccion: "$_id",
      totalVotosValidos: 1,
      totalVotosNulos: 1
    }
  }
])**


8. Encuentra los distritos donde la diferencia de votos entre el partido ganador y el segundo partido fue menor a 5%.
**db.ResultadosVotos.aggregate([
  {
    $addFields: {
      porcentajeDiferencia: {
        $abs: {
          $subtract: [
            { $divide: ["$votos_ganador", "$votos_ganador"] },
            { $divide: ["$votos_segundo", "$votos_ganador"] }
          ]
        }
      }
    }
  },
  {
    $match: { porcentajeDiferencia: { $lt: 0.05 } }
  },
  {
    $lookup: {
      from: "DistritosElectorales",
      localField: "distrito",
      foreignField: "_id",
      as: "distritoInfo"
    }
  },
  {
    $project: {
      _id: 0,
      distrito: "$distritoInfo.nombre",
      partidoGanador: "$partido_ganador",
      partidoSegundo: "$partido_segundo",
      porcentajeDiferencia: 1
    }
  }
])**

9. Calcula la cantidad total de donaciones realizadas por cada votante durante todas las campañas electorales.
**db.Donaciones.aggregate([
  {
    $group: {
      _id: "$financiamiento",
      totalDonaciones: { $sum: "$financiamiento.monto" }
    }
  },
  {
    $lookup: {
      from: "Votantes",
      localField: "_id",
      foreignField: "_id",
      as: "votanteInfo"
    }
  },
  {
    $project: {
      _id: 0,
      votante: "$votanteInfo.persona_id",
      totalDonaciones: 1
    }
  }
])**

10. Identifica a los miembros de mesa que han trabajado en más de tres elecciones presidenciales.
**db.MiembrosMesa.aggregate([
  {
    $group: {
      _id: "$persona",
      eleccionesParticipadas: { $addToSet: "$mesa_electoral" }
    }
  },
  {
    $match: { $expr: { $gt: [{ $size: "$eleccionesParticipadas" }, 3] } }
  },
  {
    $lookup: {
      from: "Personas",
      localField: "_id",
      foreignField: "_id",
      as: "personaInfo"
    }
  },
  {
    $project: {
      _id: 0,
      persona: "$personaInfo.nombre_completo",
      eleccionesParticipadas: 1
    }
  }
])**

11. Encuentra los candidatos que han participado en debates y el número de debates en los que estuvieron presentes.
**db.Candidatos.aggregate([
  {
    $match: { "debates": { $exists: true, $ne: [] } }
  },
  {
    $project: {
      _id: 0,
      candidato: "$persona",
      numeroDebates: { $size: "$debates" }
    }
  }
])**

12. Determina la cantidad de votantes por rango de edad que participaron en una elección específica.
**db.Votantes.aggregate([
  {
    $lookup: {
      from: "Personas",
      localField: "persona_id",
      foreignField: "_id",
      as: "personaInfo"
    }
  },
  {
    $project: {
      _id: 0,
      rangoEdad: {
        $switch: {
          branches: [
            { case: { $lt: ["$personaInfo.edad", 18] }, then: "Menor de 18" },
            { case: { $and: [{ $gte: ["$personaInfo.edad", 18] }, { $lt: ["$personaInfo.edad", 25] }] }, then: "18-24" },
            { case: { $and: [{ $gte: ["$personaInfo.edad", 25] }, { $lt: ["$personaInfo.edad", 35] }] }, then: "25-34" },
            { case: { $and: [{ $gte: ["$personaInfo.edad", 35] }, { $lt: ["$personaInfo.edad", 50] }] }, then: "35-49" },
            { case: { $gte: ["$personaInfo.edad", 50] }, then: "50 y más" }
          ]
        }
      }
    }
  },
  {
    $group: {
      _id: "$rangoEdad",
      totalVotantes: { $sum: 1 }
    }
  }
])**

13. Calcula el porcentaje de votos obtenido por cada partido político en una elección particular.
**db.ResultadosVotos.aggregate([
  {
    $group: {
      _id: "$partido_ganador",
      totalVotos: { $sum: "$votos_ganador" }
    }
  },
  {
    $lookup: {
      from: "PartidosPoliticos",
      localField: "_id",
      foreignField: "_id",
      as: "partidoInfo"
    }
  },
  {
    $project: {
      _id: 0,
      partido: "$partidoInfo.nombre",
      porcentajeVotos: { $multiply: [{ $divide: ["$totalVotos", { $sum: "$totalVotos" }] }, 100] }
    }
  }
])**

14. Identifica los recintos electorales donde se han registrado irregularidades en los conteos.
**db.ResultadosVotos.aggregate([
  {
    $match: {
      $expr: { $gt: [{ $add: ["$votos_ganador", "$votos_segundo", "$votos_nulos", "$votos_blancos"] }, 100] }
    }
  },
  {
    $lookup: {
      from: "Recintos",
      localField: "distrito",
      foreignField: "_id",
      as: "recintoInfo"
    }
  },
  {
    $project: {
      _id: 0,
      recinto: "$recintoInfo.nombre_recinto",
      distrito: "$distrito",
      irregularidades: "$votos_irregulares"
    }
  }
])**

15. Encuentra los votantes que no han participado en ninguna elección presidencial.
**db.Votantes.aggregate([
  {
    $lookup: {
      from: "ResultadosVotos",
      localField: "_id",
      foreignField: "votantes_id",
      as: "resultadosInfo"
    }
  },
  {
    $match: { "resultadosInfo": { $eq: [] } }
  },
  {
    $lookup: {
      from: "Personas",
      localField: "persona_id",
      foreignField: "_id",
      as: "personaInfo"
    }
  },
  {
    $project: {
      _id: 0,
      votante: "$personaInfo.nombre_completo",
      correo: "$personaInfo.correo"
    }
  }
])**

16. Calcula la cantidad total de papeletas emitidas por cada votante en una elección específica.
**db.Votantes.aggregate([
  {
    $lookup: {
      from: "ResultadosVotos",
      localField: "_id",
      foreignField: "votantes_id",
      as: "resultadosInfo"
    }
  },
  {
    $unwind: "$resultadosInfo"
  },
  {
    $project: {
      _id: 0,
      votante: "$persona_id",
      eleccion: "$resultadosInfo._id",
      papeletasEmitidas: { $sum: { $add: ["$resultadosInfo.votos_ganador", "$resultadosInfo.votos_segundo", "$resultadosInfo.votos_nulos", "$resultadosInfo.votos_blancos"] } }
    }
  }
])**

17. Obtén la cantidad de votos por cada candidato y partido político en una elección, ordenados por el número de votos descendente.
**db.ResultadosVotos.aggregate([
  {
    $lookup: {
      from: "PartidosPoliticos",
      localField: "partido_ganador",
      foreignField: "_id",
      as: "partidoInfo"
    }
  },
  {
    $lookup: {
      from: "Candidatos",
      localField: "partidoInfo.candidatos",
      foreignField: "_id",
      as: "candidatoInfo"
    }
  },
  {
    $unwind: "$candidatoInfo"
  },
  {
    $project: {
      _id: 0,
      candidato: "$candidatoInfo.nombre_completo",
      partido: "$partidoInfo.nombre",
      votosGanador: "$votos_ganador"
    }
  },
  {
    $sort: { votosGanador: -1 }
  }
])**

18. Encuentra los candidatos que han ganado en al menos dos elecciones presidenciales.
**db.ResultadosVotos.aggregate([
  {
    $lookup: {
      from: "PartidosPoliticos",
      localField: "partido_ganador",
      foreignField: "_id",
      as: "partidoInfo"
    }
  },
  {
    $lookup: {
      from: "Candidatos",
      localField: "partidoInfo.candidatos",
      foreignField: "_id",
      as: "candidatoInfo"
    }
  },
  {
    $unwind: "$candidatoInfo"
  },
  {
    $group: {
      _id: "$candidatoInfo._id",
      ganadas: { $sum: 1 }
    }
  },
  {
    $match: { ganadas: { $gte: 2 } }
  },
  {
    $lookup: {
      from: "Candidatos",
      localField: "_id",
      foreignField: "_id",
      as: "candidatoGanadorInfo"
    }
  },
  {
    $project: {
      _id: 0,
      candidato: "$candidatoGanadorInfo.nombre_completo",
      eleccionesGanadas: "$ganadas"
    }
  }
])**

19. Identifica los distritos con la menor participación de votantes en una elección específica.
**db.Recintos.aggregate([
  {
    $lookup: {
      from: "MesasElectorales",
      localField: "_id",
      foreignField: "mesas_electorales",
      as: "mesasInfo"
    }
  },
  {
    $unwind: "$mesasInfo"
  },
  {
    $lookup: {
      from: "Votantes",
      localField: "mesasInfo.votantes_id",
      foreignField: "_id",
      as: "votantesInfo"
    }
  },
  {
    $group: {
      _id: "$_id",
      nombre_recinto: { $first: "$nombre_recinto" },
      totalVotantes: { $sum: { $size: "$votantesInfo" } }
    }
  },
  {
    $sort: { totalVotantes: 1 }
  },
  {
    $limit: 1
  }
])**

20. Calcula la diferencia promedio de votos entre el partido ganador y el segundo partido en todas las elecciones.
**db.ResultadosVotos.aggregate([
  {
    $group: {
      _id: null,
      totalDiferencia: { $avg: { $subtract: ["$votos_ganador", "$votos_segundo"] } }
    }
  },
  {
    $project: {
      _id: 0,
      diferenciaPromedio: "$totalDiferencia"
    }
  }
])**

21. Encuentra los votantes que han donado más del 10% de su ingreso total durante las campañas electorales.
**db.Donaciones.aggregate([
  {
    $lookup: {
      from: "Votantes",
      localField: "partido_politico",
      foreignField: "_id",
      as: "votanteInfo"
    }
  },
  {
    $lookup: {
      from: "Personas",
      localField: "votanteInfo.persona_id",
      foreignField: "_id",
      as: "personaInfo"
    }
  },
  {
    $group: {
      _id: "$partido_politico",
      totalDonaciones: { $sum: "$financiamiento.monto" },
      ingresoTotal: { $sum: "$personaInfo.ingreso_total" }
    }
  },
  {
    $match: { $expr: { $gt: [{ $divide: ["$totalDonaciones", "$ingresoTotal"] }, 0.1] } }
  },
  {
    $lookup: {
      from: "PartidosPoliticos",
      localField: "_id",
      foreignField: "_id",
      as: "partidoInfo"
    }
  },
  {
    $project: {
      _id: 0,
      partido: "$partidoInfo.nombre",
      votante: "$votanteInfo.persona_id",
      porcentajeDonacion: { $multiply: [{ $divide: ["$totalDonaciones", "$ingresoTotal"] }, 100] }
    }
  }
])**

22. Determina la cantidad de encuestas realizadas por cada partido político durante una campaña específica.
**db.Encuestas.aggregate([
  {
    $lookup: {
      from: "PartidosPoliticos",
      localField: "partido_politico",
      foreignField: "_id",
      as: "partidoInfo"
    }
  },
  {
    $group: {
      _id: "$partido_politico",
      totalEncuestas: { $sum: 1 }
    }
  },
  {
    $lookup: {
      from: "PartidosPoliticos",
      localField: "_id",
      foreignField: "_id",
      as: "partidoInfo"
    }
  },
  {
    $project: {
      _id: 0,
      partido: "$partidoInfo.nombre",
      totalEncuestas: 1
    }
  }
])**

23. Identifica los candidatos que han cambiado de partido político entre elecciones presidenciales.
**db.Candidatos.aggregate([
  {
    $group: {
      _id: "$persona",
      partidos: { $addToSet: "$partido_politico" }
    }
  },
  {
    $match: { $expr: { $gt: [{ $size: "$partidos" }, 1] } }
  },
  {
    $lookup: {
      from: "Personas",
      localField: "_id",
      foreignField: "_id",
      as: "personaInfo"
    }
  },
  {
    $project: {
      _id: 0,
      candidato: "$personaInfo.nombre_completo",
      partidos: 1
    }
  }
])**

24. Calcula la cantidad de votos nulos por recinto electoral en una elección específica.
**db.ResultadosVotos.aggregate([
  {
    $match: { votos_nulos: { $gt: 0 } }
  },
  {
    $lookup: {
      from: "Recintos",
      localField: "distrito",
      foreignField: "_id",
      as: "recintoInfo"
    }
  },
  {
    $project: {
      _id: 0,
      recinto: "$recintoInfo.nombre_recinto",
      distrito: "$distrito",
      votosNulos: "$votos_nulos"
    }
  }
])**

25. Encuentra los distritos donde la participación de votantes fue superior al promedio durante todas las elecciones.
**db.Recintos.aggregate([
  {
    $lookup: {
      from: "MesasElectorales",
      localField: "_id",
      foreignField: "mesas_electorales",
      as: "mesasInfo"
    }
  },
  {
    $unwind: "$mesasInfo"
  },
  {
    $lookup: {
      from: "Votantes",
      localField: "mesasInfo.votantes_id",
      foreignField: "_id",
      as: "votantesInfo"
    }
  },
  {
    $group: {
      _id: "$_id",
      nombre_recinto: { $first: "$nombre_recinto" },
      totalVotantes: { $sum: { $size: "$votantesInfo" } }
    }
  },
  {
    $lookup: {
      from: "ResultadosVotos",
      localField: "_id",
      foreignField: "distrito",
      as: "resultadosInfo"
    }
  },
  {
    $group: {
      _id: "$_id",
      nombre_recinto: { $first: "$nombre_recinto" },
      promedioVotantes: { $avg: "$totalVotantes" }
    }
  },
  {
    $lookup: {
      from: "ResultadosVotos",
      localField: "_id",
      foreignField: "distrito",
      as: "resultadosInfo"
    }
  },
  {
    $unwind: "$resultadosInfo"
  },
  {
    $project: {
      _id: 0,
      distrito: "$resultadosInfo.distrito",
      nombre_recinto: 1,
      promedioVotantes: 1,
      participacionSuperiorPromedio: { $gt: ["$resultadosInfo.total_votos", "$promedioVotantes"] }
    }
  },
  {
    $match: { participacionSuperiorPromedio: true }
  }
])**
